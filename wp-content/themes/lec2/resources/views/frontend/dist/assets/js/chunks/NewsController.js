(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{905:function(module,exports,__webpack_require__){"use strict";eval("/* WEBPACK VAR INJECTION */(function(global, $) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = __webpack_require__(20);\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _toConsumableArray2 = __webpack_require__(130);\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _asyncToGenerator2 = __webpack_require__(21);\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = __webpack_require__(27);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(17);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(19);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(28);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(29);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _abstract = __webpack_require__(94);\n\nvar _abstract2 = _interopRequireDefault(_abstract);\n\nvar _AjaxService = __webpack_require__(71);\n\nvar _AjaxService2 = _interopRequireDefault(_AjaxService);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar NewsController = function (_AbstractController) {\n  (0, _inherits3.default)(NewsController, _AbstractController);\n\n  function NewsController() {\n    var _ref,\n        _this3 = this;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, NewsController);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = NewsController.__proto__ || (0, _getPrototypeOf2.default)(NewsController)).call.apply(_ref, [this].concat(args))), _this), _this.getMorePost = function () {\n      var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(postsPerPage) {\n        var _this2, $LoadMoreBtn, $newsList, $newsWrapper, $newsLink, pageNumber, data, resp;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this2 = _this, $LoadMoreBtn = _this2.$LoadMoreBtn, $newsList = _this2.$newsList, $newsWrapper = _this2.$newsWrapper, $newsLink = _this2.$newsLink;\n                pageNumber = _this.$scope.newsList.pageNumber;\n                data = {\n                  postsPerPage: postsPerPage,\n                  pageNumber: pageNumber\n                };\n\n\n                $LoadMoreBtn.hide();\n                $newsWrapper.loading(true);\n\n                _context.prev = 5;\n                _context.next = 8;\n                return _AjaxService2.default.getInstance().getMorePost(data);\n\n              case 8:\n                resp = _context.sent;\n\n                if (resp) {\n                  _this.$scope.newsList = {\n                    items: [].concat((0, _toConsumableArray3.default)(_this.$scope.newsList.items), (0, _toConsumableArray3.default)(resp.data)),\n                    pageNumber: pageNumber\n                  };\n\n                  _this.$scope.newsList.pageNumber++;\n\n                  if (global.viewport.isMobile || global.viewport.isTablet) {\n                    $newsList.slick(_this.slickOption);\n                  }\n\n                  $LoadMoreBtn.hide();\n\n                  if (resp.show_load_more) {\n                    $LoadMoreBtn.show();\n                  } else {\n                    $LoadMoreBtn.hide();\n                  }\n                }\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context['catch'](5);\n\n                console.error(_context.t0);\n\n              case 15:\n                $newsList.addClass('all-loaded');\n                $newsLink.addClass('all-loaded');\n                $newsWrapper.loading(false);\n\n              case 18:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this3, [[5, 12]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(), _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(NewsController, [{\n    key: 'main',\n    value: function main() {\n      this.slickOption = {\n        slidesToShow: 4,\n        slidesToScroll: 1,\n        arrows: true,\n        dots: false,\n        autoplay: false,\n        infinite: false,\n        centerPadding: '20px',\n        responsive: [{\n          breakpoint: 1025,\n          settings: {\n            initialSlide: 2,\n            slidesToShow: 2,\n            slidesToScroll: 1\n          }\n        }, {\n          breakpoint: 768,\n          settings: {\n            initialSlide: 1,\n            slidesToShow: 1,\n            slidesToScroll: 1\n          }\n        }]\n      };\n\n      this.$newsBlock = $('.news-card-block');\n      this.$LoadMoreBtn = this.$newsBlock.find('#loadMore');\n\n      this.$newsList = this.$newsBlock.find('#news-item-listing');\n      this.$newsWrapper = this.$newsBlock.find('.news-item-wrapper');\n      this.$newsLink = this.$newsBlock.find('.news-link');\n\n      this.$scope.newsList = {\n        items: [],\n        pageNumber: 1\n      };\n\n      this.getMorePostFirst();\n      this.initLoadMorePost();\n    }\n  }, {\n    key: 'getMorePostFirst',\n    value: function getMorePostFirst() {\n      this.getMorePost(12);\n    }\n  }, {\n    key: 'initLoadMorePost',\n    value: function initLoadMorePost() {\n      var _this4 = this;\n\n      var $LoadMoreBtn = this.$LoadMoreBtn,\n          $newsList = this.$newsList;\n\n      $LoadMoreBtn.on('click', function () {\n        if (global.viewport.isMobile || global.viewport.isTablet) {\n          $newsList.slick('unslick');\n        }\n\n        _this4.getMorePost(4);\n      });\n    }\n  }]);\n  return NewsController;\n}(_abstract2.default);\n\nexports.default = NewsController;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(12), __webpack_require__(2)))\n\n//# sourceURL=webpack:///./views/pages/news/controller/NewsController.js?")}}]);